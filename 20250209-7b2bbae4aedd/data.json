{"title":"在 Ubuntu 上使用新的方式配置 docker-ce apt 镜像源","date":"2025-02-09T04:32:17.389Z","toc":false,"source":"_posts/在 Ubuntu 上使用新的方式配置 docker-ce apt 镜像源.md","raw":"---\ntitle: 在 Ubuntu 上使用新的方式配置 docker-ce apt 镜像源\ntoc: false\ntags: [Linux, Ubuntu, 运维, 后端]\n---\n\n```bash\n# 导入 Docker gpg key\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg\n\n# 写入镜像源配置文件\nsudo echo \"Types: deb\\\nURIs: https://mirrors.hust.edu.cn/docker-ce/linux/ubuntu/\\\nSuites: noble\\\nComponents: stable\\\nSigned-By: /usr/share/keyrings/docker-archive-keyring.gpg\" > /etc/apt/sources.list.d/docker-ce.sources\n\n# 删除旧版配置文件\nsudo rm archive_uri-https_mirrors_hust_edu_cn_docker-ce_linux_ubuntu-noble.list\n\n# 更新 apt cache\nsudo apt update\n```\n\n若按照 sources.list 写法，镜像源格式也可以写作：\n\n```plaintext\ndeb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu noble stable\n```\n\n有关 gpg 的 --dearmor 参数：（from linux man gpg）\n> Pack  or  unpack  an  arbitrary  input  into/from an OpenPGP ASCII armor.  This is a GnuPG extension to OpenPGP and in general not very useful.  The --dearmor command can also be used to dearmor PEM armors.\n\nRef: [SourcesList - Debian Wiki](https://wiki.debian.org/SourcesList)\n","slug":"在 Ubuntu 上使用新的方式配置 docker-ce apt 镜像源","published":true,"updated":"2025-02-08T16:33:12.000Z","_id":"cm6x4ojm20001qpqe8dw16fxi","comments":true,"layout":"post","photos":[],"html":"<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 导入 Docker gpg key</span></span><br><span class=\"line\">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | <span class=\"built_in\">sudo</span> gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 写入镜像源配置文件</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">echo</span> <span class=\"string\">&quot;Types: deb\\</span></span><br><span class=\"line\"><span class=\"string\">URIs: https://mirrors.hust.edu.cn/docker-ce/linux/ubuntu/\\</span></span><br><span class=\"line\"><span class=\"string\">Suites: noble\\</span></span><br><span class=\"line\"><span class=\"string\">Components: stable\\</span></span><br><span class=\"line\"><span class=\"string\">Signed-By: /usr/share/keyrings/docker-archive-keyring.gpg&quot;</span> &gt; /etc/apt/sources.list.d/docker-ce.sources</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除旧版配置文件</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">rm</span> archive_uri-https_mirrors_hust_edu_cn_docker-ce_linux_ubuntu-noble.list</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更新 apt cache</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt update</span><br></pre></td></tr></table></figure>\n<p>若按照 sources.list 写法，镜像源格式也可以写作：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu noble stable</span><br></pre></td></tr></table></figure>\n<p>有关 gpg 的 --dearmor 参数：（from linux man gpg）</p>\n<blockquote>\n<p>Pack  or  unpack  an  arbitrary  input  into/from an OpenPGP ASCII armor.  This is a GnuPG extension to OpenPGP and in general not very useful.  The --dearmor command can also be used to dearmor PEM armors.</p>\n</blockquote>\n<p>Ref: <a href=\"https://wiki.debian.org/SourcesList\">SourcesList - Debian Wiki</a></p>\n","excerpt":"","more":"<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 导入 Docker gpg key</span></span><br><span class=\"line\">curl -fsSL https://download.docker.com/linux/ubuntu/gpg | <span class=\"built_in\">sudo</span> gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 写入镜像源配置文件</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">echo</span> <span class=\"string\">&quot;Types: deb\\</span></span><br><span class=\"line\"><span class=\"string\">URIs: https://mirrors.hust.edu.cn/docker-ce/linux/ubuntu/\\</span></span><br><span class=\"line\"><span class=\"string\">Suites: noble\\</span></span><br><span class=\"line\"><span class=\"string\">Components: stable\\</span></span><br><span class=\"line\"><span class=\"string\">Signed-By: /usr/share/keyrings/docker-archive-keyring.gpg&quot;</span> &gt; /etc/apt/sources.list.d/docker-ce.sources</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除旧版配置文件</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> <span class=\"built_in\">rm</span> archive_uri-https_mirrors_hust_edu_cn_docker-ce_linux_ubuntu-noble.list</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 更新 apt cache</span></span><br><span class=\"line\"><span class=\"built_in\">sudo</span> apt update</span><br></pre></td></tr></table></figure>\n<p>若按照 sources.list 写法，镜像源格式也可以写作：</p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">deb [arch=amd64 signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu noble stable</span><br></pre></td></tr></table></figure>\n<p>有关 gpg 的 --dearmor 参数：（from linux man gpg）</p>\n<blockquote>\n<p>Pack  or  unpack  an  arbitrary  input  into/from an OpenPGP ASCII armor.  This is a GnuPG extension to OpenPGP and in general not very useful.  The --dearmor command can also be used to dearmor PEM armors.</p>\n</blockquote>\n<p>Ref: <a href=\"https://wiki.debian.org/SourcesList\">SourcesList - Debian Wiki</a></p>\n","path":"20250209-7b2bbae4aedd/","permalink":"https://blog.leonhardt.tech/20250209-7b2bbae4aedd/","tags":[{"name":"Linux","_id":"cm6x4ojmk0004qpqegzqaa81k","slug":"Linux","path":"tags/Linux/","permalink":"https://blog.leonhardt.tech/tags/Linux/","length":2},{"name":"Ubuntu","_id":"cm6x4ojmn0006qpqebqgc9eas","slug":"Ubuntu","path":"tags/Ubuntu/","permalink":"https://blog.leonhardt.tech/tags/Ubuntu/","length":2},{"name":"运维","_id":"cm6x4ojmn0007qpqef2tg6bnu","slug":"运维","path":"tags/运维/","permalink":"https://blog.leonhardt.tech/tags/%E8%BF%90%E7%BB%B4/","length":2},{"name":"后端","_id":"cm6x4ojmo0008qpqe4435douh","slug":"后端","path":"tags/后端/","permalink":"https://blog.leonhardt.tech/tags/%E5%90%8E%E7%AB%AF/","length":2}],"categories":[],"prev":null,"next":{"title":"解决 Ubuntu sshd_config 修改端口无效的问题","date":"2025-02-09T04:32:17.389Z","slug":"解决 Ubuntu sshd_config 修改端口无效的问题","published":true,"updated":"2025-02-08T15:56:19.000Z","_id":"cm6x4ojmi0003qpqe154x8whf","layout":"post","photos":[],"excerpt":"","path":"20250209-49f96f225d13/","permalink":"https://blog.leonhardt.tech/20250209-49f96f225d13/","__post":true},"__post":true}